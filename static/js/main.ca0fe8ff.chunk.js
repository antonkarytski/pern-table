(this["webpackJsonppern-table"]=this["webpackJsonppern-table"]||[]).push([[0],{10:function(e,t,n){e.exports={FilteredTable:"FilteredTable_FilteredTable__2X0vA",Menu:"FilteredTable_Menu__ww9B-"}},12:function(e,t,n){e.exports={Main:"Styles_Main__Y9Gx6"}},13:function(e,t,n){e.exports={Button:"Buttons_Button__3RFCb"}},21:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(11),i=n.n(r),o=n(12),l=n.n(o),s=n(3),u=n(5),b=n.n(u);function d(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)}))}var j={equal:function(e,t){return e===t},contain:function(e,t){var n=(""+e).toLowerCase();return(""+t).toLowerCase().includes(n)},more:function(e,t){return e<t},less:function(e,t){return e>t}};function f(e,t){var n=Object(a.useState)(e.length?d(e[0],t):[]),c=Object(s.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){e.length&&i(d(e[0],t))}),[e,t]),r}var O=n(6),v=n(7),p=n.n(v),h=n(2),m=n(4),x=n(13),g=n.n(x),_=n(0);function C(e){var t=e.className,n=e.label,a=Object(m.a)(e,["className","label"]);return Object(_.jsx)("button",Object(h.a)(Object(h.a)({className:p()(g.a.Button,t)},a),{},{children:n}))}function T(e){var t=e.buttonsCount,n=e.onClick,a=e.activeIndex,c=(e.visibleButtonsCount,e.className),r=e.classes;return Object(_.jsx)("div",{className:c,children:Array(t).fill(null).map((function(e,t){return Object(_.jsx)(C,{className:p()(null===r||void 0===r?void 0:r.button,(null===r||void 0===r?void 0:r.buttonActive)&&Object(O.a)({},r.buttonActive,t===a)),onClick:function(){return n(t)},label:t+1},"buttonSet".concat(c,"Key").concat(t))})).filter((function(e,n){return 0===n||a<4&&n<6||a>t-5&&n>t-7||n===t-1||n===a||n<a&&n>=a-2||n>a&&n<=a+2}))})}var N=n(9),k=n.n(N),S=n(14),F={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};function M(){var e=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(s.a)(r,2),o=i[0],l=i[1],u=Object(a.useState)(!1),b=Object(s.a)(u,2),d=b[0],j=b[1];return{data:n,getData:Object(a.useCallback)(Object(S.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!1),l(!0),e.next=4,fetch("".concat("https://pern-table-distance-data.herokuapp.com","/api/data/allrecords"),F);case 4:if(!(t=e.sent).ok){e.next=12;break}return e.next=8,t.json();case 8:n=e.sent,c(n),e.next=13;break;case 12:j(!0);case 13:l(!1);case 14:case"end":return e.stop()}}),e)}))),[]),onLoading:o,onError:d}}(),t=e.getData,n=e.data,c=e.onLoading,r=e.onError,i=Object(a.useMemo)((function(){return n.map((function(e){var t,n=e.date,a=Object(m.a)(e,["date"]);return Object(h.a)(Object(h.a)({},a),{},{date:(t=n,t.slice(0,10))})}))}),[n]);return Object(a.useEffect)((function(){t()}),[t]),{data:i,onLoading:c,onError:r}}function y(e){var t,n=e.data,c=e.renderSettings,r=c.exceptedFields,i=c.recordsPerPage,o=c.usePagination,l=Object(a.useState)(0),u=Object(s.a)(l,2),d=u[0],j=u[1],O=function(e,t){return Object(a.useMemo)((function(){if(t===e.length)return[e];var n=Math.ceil(e.length/t);return Array(n).fill(null).map((function(n,a){return e.slice(a*t,t*(a+1))}))}),[e,t])}(n,o?i:n.length),v=f(n,r);return Object(a.useEffect)((function(){var e=Math.ceil(n.length/i);d+1>e&&j(e)}),[n,i,d]),Object(_.jsxs)("div",{className:b.a.TableWrap,children:[Object(_.jsx)("div",{className:b.a.TableContainer,children:Object(_.jsxs)("table",{className:b.a.Table,children:[Object(_.jsx)("thead",{children:Object(_.jsx)("tr",{children:v.map((function(e,t){return Object(_.jsx)("th",{children:e},e+t)}))})}),Object(_.jsx)("tbody",{children:null===(t=O[d])||void 0===t?void 0:t.map((function(e,t){return Object(_.jsx)("tr",{children:v.map((function(n){return Object(_.jsx)("td",{children:e[n]},"".concat(e.id).concat(n).concat(t))}))},"row"+e.id+t)}))})]})}),o?Object(_.jsx)(T,{visibleButtonsCount:10,buttonsCount:O.length||1,onClick:function(e){return j(e)},className:b.a.Pagination,activeIndex:d,classes:{button:b.a.PaginationButton,buttonActive:b.a.Active}}):null]})}function P(e){var t=e.options,n=e.onChange,a=e.name,c=e.value,r=e.label,i=Object(m.a)(e,["options","onChange","name","value","label"]);return Object(_.jsxs)("div",{children:[r?Object(_.jsxs)("span",{children:[r," "]}):null,Object(_.jsx)("select",Object(h.a)(Object(h.a)({name:a,onChange:n,value:c},i),{},{children:t.map((function(e,t){return Object(_.jsx)("option",{value:e,children:(n=e,n[0].toUpperCase()+n.slice(1))},"option".concat(a).concat(e).concat(t));var n}))}))]})}function A(e){var t=e.type,n=e.name,a=e.value,c=e.onChange,r=e.label,i=Object(m.a)(e,["type","name","value","onChange","label"]);return Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{htmlFor:"inputId".concat(n),children:r}),Object(_.jsx)("input",Object(h.a)({id:"inputId".concat(n),onChange:c,type:t,value:a,name:n},i))]})}function B(e){var t=e.fields,n=e.onFilter,c=e.className,r=Object(a.useState)({field:t[0],comparisonMethodName:Object.keys(j)[0],controlValue:""}),i=Object(s.a)(r,2),o=i[0],l=i[1];function u(e){var t=e.currentTarget,n=t.value,a=t.name;l(Object(h.a)(Object(h.a)({},o),{},Object(O.a)({},a,n)))}return Object(a.useEffect)((function(){var e=o.controlValue,t=o.comparisonMethodName,a=o.field;n(e,t,a)}),[o,n]),Object(_.jsxs)("div",{className:c,children:[Object(_.jsx)(P,{label:"Field for filter: ",options:t,onChange:u,name:"field",value:o.field}),Object(_.jsx)(P,{label:"Filter method: ",options:Object.keys(j),onChange:u,name:"comparisonMethodName",value:o.comparisonMethodName}),Object(_.jsx)(A,{label:"Value: ",type:"text",name:"controlValue",value:o.controlValue,onChange:u})]})}var E=n(10),w=n.n(E);function D(e){var t=e.filterSettings.exceptedFields,n=e.renderSettings,c=e.data,r=function(e){var t=Object(a.useState)(e),n=Object(s.a)(t,2),c=n[0],r=n[1];return{filteredData:c,filterData:Object(a.useCallback)((function(t,n,a){if(t){var c=j[n];r(e.filter((function(e){return c(t,e[a])})))}else r(e)}),[e])}}(c),i=r.filteredData,o=r.filterData,l=f(c,t);return Object(_.jsxs)("div",{className:w.a.FilteredTable,children:[Object(_.jsx)(B,{className:w.a.Menu,fields:l,onFilter:o}),Object(_.jsx)(y,{data:i,renderSettings:n})]})}var L=function(){var e=M(),t=e.data;return e.onLoading,e.onError,Object(_.jsx)("div",{className:l.a.Main,children:Object(_.jsx)(D,{data:t,filterSettings:{exceptedFields:["id","date"]},renderSettings:{exceptedFields:["id"],recordsPerPage:20,usePagination:!0}})})};i.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(L,{})}),document.getElementById("root"))},5:function(e,t,n){e.exports={TableWrap:"Table_TableWrap__3N_4k",TableContainer:"Table_TableContainer__3QgG5",Pagination:"Table_Pagination__2R4Hu",PaginationButton:"Table_PaginationButton__jAVb1",Active:"Table_Active__2ihP4",Table:"Table_Table__2dUf3"}}},[[21,1,2]]]);
//# sourceMappingURL=main.ca0fe8ff.chunk.js.map